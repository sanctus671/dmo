(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{zDS7:function(n,l,t){"use strict";t.r(l);var u=t("CcnG"),e=t("ZZ/e"),o=t("ri4K"),i=t("9B/o"),a=t("wd/R"),r=function(){function n(n,l,t,u){var e=this;this.plt=n,this.authenticationService=l,this.alertCtrl=t,this.iab=u,this.user={},this.authenticationService.getUserData().subscribe(function(n){e.user=n}),this.paymentTotal=0}return n.prototype.ngOnInit=function(){},n.prototype.ionViewDidEnter=function(){this.getPaymentTotal()},n.prototype.getBankAccount=function(){return this.user.profile&&this.user.profile.bank_account?this.user.profile.bank_account.replace(/(\+?\d{3})(\d+)(\d{2})/g,function(n,l,t,u){return l+"*".repeat(t.length)+u}):"No bank account set"},n.prototype.getPaymentTotal=function(){var n=this;this.authenticationService.getPaymentTotal().then(function(l){n.paymentTotal=l})},n.prototype.getNextPaymentDate=function(){return a().add(1,"months").startOf("month").format("DD/MM/YYYY")},n.prototype.openRate=function(){this.plt.is("ios")?this.iab.create("https://itunes.apple.com/","_system"):this.iab.create("https://play.google.com/store/apps/details?id=com.dmonz.app","_system")},n.prototype.openFollow=function(){this.iab.create("https://www.facebook.com/","_system")},n.prototype.openEmail=function(){this.iab.create("mailto:calebmackrellnz@gmail.com","_system")},n.prototype.openChangeBankAccount=function(){var n=this;this.alertCtrl.create({header:"Change Bank Account",inputs:[{name:"bank_account",placeholder:"Bank Account Number",type:"number"},{name:"swift",placeholder:"BIC/SWIFT code",type:"number"}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Change",handler:function(l){if(l.bank_account){var t={bank_account:l.bank_account,swift:l.swift,user_id:n.user.id,id:n.user.profile.id};n.user.profile.bank_account=l.bank_account,n.user.profile.swift=l.swift,n.authenticationService.updateProfile(t).then(function(){})}}}]}).then(function(n){n.present()})},n.prototype.openChangePassword=function(){var n=this;this.alertCtrl.create({header:"Change Password",inputs:[{name:"password",placeholder:"Password",type:"password"},{name:"confirmPassword",placeholder:"Confirm Password",type:"password"}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Change",handler:function(l){l.password&&l.confirmPassword&&l.password===l.confirmPassword?n.authenticationService.changePassword(n.user.email,l.password,l.confirmPassword).then(function(){n.alertCtrl.create({header:"Success",message:"Your password has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then(function(n){n.present()})}).catch(function(){n.alertCtrl.create({header:"Error",message:"There was an error while changing your password.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(l){setTimeout(function(){n.openChangePassword()},200)}}]}).then(function(n){n.present()})}):n.alertCtrl.create({header:"Error",message:"Passwords do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(l){setTimeout(function(){n.openChangePassword()},200)}}]}).then(function(n){n.present()})}}]}).then(function(n){n.present()})},n.prototype.logout=function(){this.authenticationService.logout()},n}(),s=function(){return function(){}}(),c=t("pMnS"),b=t("oBZk"),h=t("ZYCi"),p=t("Ip0R"),f=u.rb({encapsulation:0,styles:[[".settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:20px;padding-top:10px}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]:first-child{margin-top:0;padding-top:0}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:0}.settings-list[_ngcontent-%COMP%]   ion-icon[name=trophy][_ngcontent-%COMP%]{color:#ffbf00}.settings-list[_ngcontent-%COMP%]   ion-icon[name=heart][_ngcontent-%COMP%]{color:#e31b23}.settings-list[_ngcontent-%COMP%]   ion-icon[name=logo-facebook][_ngcontent-%COMP%]{color:#3b5998}.settings-list[_ngcontent-%COMP%]   ion-icon[name=mail][_ngcontent-%COMP%]{color:grey}.settings-list[_ngcontent-%COMP%]   ion-icon[name=unlock][_ngcontent-%COMP%]{color:#d6a000}.settings-list[_ngcontent-%COMP%]   ion-icon[name=lock][_ngcontent-%COMP%]{color:#d47835}.settings-list[_ngcontent-%COMP%]   ion-icon[name=cloud-upload][_ngcontent-%COMP%]{color:#8cd0ef}.settings-list[_ngcontent-%COMP%]   ion-icon[name=locate][_ngcontent-%COMP%]{color:#90e483}.settings-list[_ngcontent-%COMP%]   ion-icon[name=wallet][_ngcontent-%COMP%]{color:#54244b}.settings-list[_ngcontent-%COMP%]   ion-icon[name=cash][_ngcontent-%COMP%]{color:#3a7d18}"]],data:{}});function d(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,4,"ion-button",[["fill","outline"],["routerDirection","forward"],["routerLink","/upgrade"],["slot","end"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==u.Fb(n,2).onClick()&&e),"click"===l&&(e=!1!==u.Fb(n,3).onClick(t)&&e),e},b.T,b.d)),u.sb(1,49152,null,0,e.k,[u.h,u.k,u.z],{fill:[0,"fill"],routerDirection:[1,"routerDirection"]},null),u.sb(2,16384,null,0,h.o,[h.n,h.a,[8,null],u.D,u.k],{routerLink:[0,"routerLink"]},null),u.sb(3,737280,null,0,e.Nb,[p.h,e.Ib,u.k,h.n,[2,h.o]],{routerDirection:[0,"routerDirection"]},null),(n()(),u.Nb(-1,0,["Upgrade"]))],function(n,l){n(l,1,0,"outline","forward"),n(l,2,0,"/upgrade"),n(l,3,0,"forward")},null)}function m(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,2,"ion-button",[["disabled",""],["fill","outline"],["slot","end"]],null,null,null,b.T,b.d)),u.sb(1,49152,null,0,e.k,[u.h,u.k,u.z],{disabled:[0,"disabled"],fill:[1,"fill"]},null),(n()(),u.Nb(-1,0,["Purchased"]))],function(n,l){n(l,1,0,"","outline")},null)}function g(n){return u.Pb(0,[u.Hb(0,p.d,[u.u]),(n()(),u.tb(1,0,null,null,13,"ion-header",[],null,null,null,b.gb,b.q)),u.sb(2,49152,null,0,e.B,[u.h,u.k,u.z],null,null),(n()(),u.tb(3,0,null,0,11,"ion-toolbar",[["color","primary"]],null,null,null,b.Fb,b.P)),u.sb(4,49152,null,0,e.Bb,[u.h,u.k,u.z],{color:[0,"color"]},null),(n()(),u.tb(5,0,null,0,6,"ion-buttons",[["slot","start"]],null,null,null,b.U,b.e)),u.sb(6,49152,null,0,e.l,[u.h,u.k,u.z],null,null),(n()(),u.tb(7,0,null,0,4,"ion-button",[],null,null,null,b.T,b.d)),u.sb(8,49152,null,0,e.k,[u.h,u.k,u.z],null,null),(n()(),u.tb(9,0,null,0,2,"ion-back-button",[["defaultHref","/tabs/home"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==u.Fb(n,11).onClick(t)&&e),e},b.S,b.c)),u.sb(10,49152,null,0,e.g,[u.h,u.k,u.z],{defaultHref:[0,"defaultHref"]},null),u.sb(11,16384,null,0,e.h,[[2,e.hb],e.Ib],{defaultHref:[0,"defaultHref"]},null),(n()(),u.tb(12,0,null,0,2,"ion-title",[],null,null,null,b.Db,b.N)),u.sb(13,49152,null,0,e.zb,[u.h,u.k,u.z],null,null),(n()(),u.Nb(-1,0,["Settings"])),(n()(),u.tb(15,0,null,null,83,"ion-content",[],null,null,null,b.ab,b.k)),u.sb(16,49152,null,0,e.u,[u.h,u.k,u.z],null,null),(n()(),u.tb(17,0,null,0,81,"ion-list",[["class","settings-list"]],null,null,null,b.mb,b.v)),u.sb(18,49152,null,0,e.O,[u.h,u.k,u.z],null,null),(n()(),u.tb(19,0,null,0,2,"ion-list-header",[],null,null,null,b.lb,b.w)),u.sb(20,49152,null,0,e.P,[u.h,u.k,u.z],null,null),(n()(),u.Nb(-1,0,["Balance"])),(n()(),u.tb(22,0,null,0,10,"ion-item",[["class","settings-list__payment"]],null,null,null,b.jb,b.t)),u.sb(23,49152,null,0,e.H,[u.h,u.k,u.z],null,null),(n()(),u.tb(24,0,null,0,1,"ion-icon",[["name","cash"],["slot","start"]],null,null,null,b.hb,b.r)),u.sb(25,49152,null,0,e.C,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.tb(26,0,null,0,6,"ion-label",[],null,null,null,b.kb,b.u)),u.sb(27,49152,null,0,e.N,[u.h,u.k,u.z],null,null),(n()(),u.tb(28,0,null,0,2,"h2",[],null,null,null,null,null)),(n()(),u.Nb(29,null,["$",""])),u.Jb(30,2),(n()(),u.tb(31,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),u.Nb(32,null,["Next payment ",""])),(n()(),u.tb(33,0,null,0,12,"ion-item",[["class","settings-list__payment"]],null,null,null,b.jb,b.t)),u.sb(34,49152,null,0,e.H,[u.h,u.k,u.z],null,null),(n()(),u.tb(35,0,null,0,1,"ion-icon",[["name","wallet"],["slot","start"]],null,null,null,b.hb,b.r)),u.sb(36,49152,null,0,e.C,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.tb(37,0,null,0,5,"ion-label",[],null,null,null,b.kb,b.u)),u.sb(38,49152,null,0,e.N,[u.h,u.k,u.z],null,null),(n()(),u.tb(39,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),u.Nb(-1,null,["Bank Account"])),(n()(),u.tb(41,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),u.Nb(42,null,["",""])),(n()(),u.tb(43,0,null,0,2,"ion-button",[["fill","outline"],["slot","end"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openChangeBankAccount()&&u),u},b.T,b.d)),u.sb(44,49152,null,0,e.k,[u.h,u.k,u.z],{fill:[0,"fill"]},null),(n()(),u.Nb(-1,0,["Change"])),(n()(),u.tb(46,0,null,0,2,"ion-list-header",[],null,null,null,b.lb,b.w)),u.sb(47,49152,null,0,e.P,[u.h,u.k,u.z],null,null),(n()(),u.Nb(-1,0,["Support"])),(n()(),u.tb(49,0,null,0,7,"ion-item",[],null,null,null,b.jb,b.t)),u.sb(50,49152,null,0,e.H,[u.h,u.k,u.z],null,null),(n()(),u.tb(51,0,null,0,1,"ion-icon",[["name","heart"],["slot","start"]],null,null,null,b.hb,b.r)),u.sb(52,49152,null,0,e.C,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.Nb(-1,0,[" Rate The App "])),(n()(),u.tb(54,0,null,0,2,"ion-button",[["fill","outline"],["slot","end"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openRate()&&u),u},b.T,b.d)),u.sb(55,49152,null,0,e.k,[u.h,u.k,u.z],{fill:[0,"fill"]},null),(n()(),u.Nb(-1,0,["Rate"])),(n()(),u.tb(57,0,null,0,7,"ion-item",[],null,null,null,b.jb,b.t)),u.sb(58,49152,null,0,e.H,[u.h,u.k,u.z],null,null),(n()(),u.tb(59,0,null,0,1,"ion-icon",[["name","logo-facebook"],["slot","start"]],null,null,null,b.hb,b.r)),u.sb(60,49152,null,0,e.C,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.Nb(-1,0,[" Follow Us "])),(n()(),u.tb(62,0,null,0,2,"ion-button",[["fill","outline"],["slot","end"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openFollow()&&u),u},b.T,b.d)),u.sb(63,49152,null,0,e.k,[u.h,u.k,u.z],{fill:[0,"fill"]},null),(n()(),u.Nb(-1,0,["Follow"])),(n()(),u.tb(65,0,null,0,7,"ion-item",[],null,null,null,b.jb,b.t)),u.sb(66,49152,null,0,e.H,[u.h,u.k,u.z],null,null),(n()(),u.tb(67,0,null,0,1,"ion-icon",[["name","mail"],["slot","start"]],null,null,null,b.hb,b.r)),u.sb(68,49152,null,0,e.C,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.Nb(-1,0,[" Contact Support "])),(n()(),u.tb(70,0,null,0,2,"ion-button",[["fill","outline"],["slot","end"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openEmail()&&u),u},b.T,b.d)),u.sb(71,49152,null,0,e.k,[u.h,u.k,u.z],{fill:[0,"fill"]},null),(n()(),u.Nb(-1,0,["Email"])),(n()(),u.tb(73,0,null,0,2,"ion-list-header",[],null,null,null,b.lb,b.w)),u.sb(74,49152,null,0,e.P,[u.h,u.k,u.z],null,null),(n()(),u.Nb(-1,0,["Account Settings"])),(n()(),u.tb(76,0,null,0,6,"ion-item",[["detail",""]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openChangePassword()&&u),u},b.jb,b.t)),u.sb(77,49152,null,0,e.H,[u.h,u.k,u.z],{detail:[0,"detail"]},null),(n()(),u.tb(78,0,null,0,1,"ion-icon",[["name","unlock"],["slot","start"]],null,null,null,b.hb,b.r)),u.sb(79,49152,null,0,e.C,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.tb(80,0,null,0,2,"ion-label",[],null,null,null,b.kb,b.u)),u.sb(81,49152,null,0,e.N,[u.h,u.k,u.z],null,null),(n()(),u.Nb(-1,0,["Change Password"])),(n()(),u.tb(83,0,null,0,10,"ion-item",[],null,null,null,b.jb,b.t)),u.sb(84,49152,null,0,e.H,[u.h,u.k,u.z],null,null),(n()(),u.tb(85,0,null,0,1,"ion-icon",[["name","trophy"],["slot","start"]],null,null,null,b.hb,b.r)),u.sb(86,49152,null,0,e.C,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.tb(87,0,null,0,2,"ion-label",[],null,null,null,b.kb,b.u)),u.sb(88,49152,null,0,e.N,[u.h,u.k,u.z],null,null),(n()(),u.Nb(-1,0,["Premium"])),(n()(),u.ib(16777216,null,0,1,null,d)),u.sb(91,16384,null,0,p.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(n()(),u.ib(16777216,null,0,1,null,m)),u.sb(93,16384,null,0,p.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(n()(),u.tb(94,0,null,0,4,"ion-item",[],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.logout()&&u),u},b.jb,b.t)),u.sb(95,49152,null,0,e.H,[u.h,u.k,u.z],null,null),(n()(),u.tb(96,0,null,0,1,"ion-icon",[["name","lock"],["slot","start"]],null,null,null,b.hb,b.r)),u.sb(97,49152,null,0,e.C,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.Nb(-1,0,[" Logout "]))],function(n,l){var t=l.component;n(l,4,0,"primary"),n(l,10,0,"/tabs/home"),n(l,11,0,"/tabs/home"),n(l,25,0,"cash"),n(l,36,0,"wallet"),n(l,44,0,"outline"),n(l,52,0,"heart"),n(l,55,0,"outline"),n(l,60,0,"logo-facebook"),n(l,63,0,"outline"),n(l,68,0,"mail"),n(l,71,0,"outline"),n(l,77,0,""),n(l,79,0,"unlock"),n(l,86,0,"trophy"),n(l,91,0,!t.user||!t.user.profile||!t.user.profile.subscription_active),n(l,93,0,t.user&&t.user.profile&&t.user.profile.subscription_active),n(l,97,0,"lock")},function(n,l){var t=l.component,e=u.Ob(l,29,0,n(l,30,0,u.Fb(l,0),t.paymentTotal,"1.2-2"));n(l,29,0,e),n(l,32,0,t.getNextPaymentDate()),n(l,42,0,t.getBankAccount())})}function k(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,1,"app-settings",[],null,null,null,g,f)),u.sb(1,114688,null,0,r,[e.Kb,o.a,e.a,i.a],null,null)],function(n,l){n(l,1,0)},null)}var C=u.pb("app-settings",r,k,{},{},[]),P=t("gIcY");t.d(l,"SettingsPageModuleNgFactory",function(){return w});var w=u.qb(s,[],function(n){return u.Cb([u.Db(512,u.j,u.bb,[[8,[c.a,C]],[3,u.j],u.x]),u.Db(4608,p.m,p.l,[u.u,[2,p.x]]),u.Db(4608,P.l,P.l,[]),u.Db(4608,e.b,e.b,[u.z,u.g]),u.Db(4608,e.Hb,e.Hb,[e.b,u.j,u.q]),u.Db(4608,e.Lb,e.Lb,[e.b,u.j,u.q]),u.Db(1073742336,p.b,p.b,[]),u.Db(1073742336,P.k,P.k,[]),u.Db(1073742336,P.d,P.d,[]),u.Db(1073742336,e.Db,e.Db,[]),u.Db(1073742336,h.q,h.q,[[2,h.v],[2,h.n]]),u.Db(1073742336,s,s,[]),u.Db(1024,h.l,function(){return[[{path:"",component:r}]]},[])])})}}]);