(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{CKTy:function(n,t,e){"use strict";e.r(t);var o=e("CcnG"),l=e("gcxx"),i=e("4R65"),u=function(){function n(n,t,e){this.eventService=n,this.router=t,this.ngZone=e,this.markerIcon=Object(i.icon)({iconUrl:"assets/marker.png",iconSize:[26,32],iconAnchor:[10,32]}),this.events=[],this.loading=!0,this.getEvents()}return n.prototype.ngOnInit=function(){this.options={layers:[Object(i.tileLayer)("https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=8be37a51847b4efe9b8089bbad4f22dc",{maxZoom:18,attribution:""})],zoom:5,center:Object(i.latLng)(-40.77653244822433,172.7488392217997)}},n.prototype.getEvents=function(){var n=this;this.loading=!0,this.eventService.getEvents("").then(function(t){n.events=t,n.markerLayers=[];for(var e=function(t){console.log(t),t.latitude&&t.longitude&&n.markerLayers.push(Object(i.marker)([t.latitude,t.longitude],{icon:n.markerIcon,riseOnHover:!0}).on("click",function(){n.ngZone.run(function(){n.router.navigate(["event/"+t.id])})}))},o=0,l=n.events;o<l.length;o++)e(l[o]);console.log(n.markerLayers),n.loading=!1}).catch(function(){n.loading=!1})},n.prototype.onMapReady=function(n){setTimeout(function(){n.invalidateSize(),n.zoomControl.setPosition("bottomright")},0)},n}(),r=function(){return function(){}}(),c=e("pMnS"),a=e("oBZk"),s=e("ZZ/e"),b=e("2lPn"),f=e("lDAE"),p=e("Ip0R"),g=e("ZYCi"),d=o.rb({encapsulation:0,styles:[[".location[_ngcontent-%COMP%]   .location__loading[_ngcontent-%COMP%]{text-align:center;margin-top:150px}.location[_ngcontent-%COMP%]   .location__map[_ngcontent-%COMP%]{height:100%;width:100%;margin-top:-20px;position:relative}.location[_ngcontent-%COMP%]   .location__map[_ngcontent-%COMP%]   .location__map__leaflet[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:110%}"]],data:{}});function h(n){return o.Pb(0,[(n()(),o.tb(0,0,null,null,2,"div",[["class","location__loading"]],null,null,null,null,null)),(n()(),o.tb(1,0,null,null,1,"ion-spinner",[],null,null,null,a.pb,a.D)),o.sb(2,49152,null,0,s.rb,[o.h,o.k,o.z],null,null)],null,null)}function v(n){return o.Pb(0,[(n()(),o.tb(0,0,null,null,1,"div",[],null,[[null,"click"]],function(n,t,e){var o=!0;return"click"===t&&(o=!1!==n.component.clicked()&&o),o},null,null)),o.sb(1,737280,null,0,b.a,[f.a,o.z],{layer:[0,"layer"]},null)],function(n,t){n(t,1,0,t.context.$implicit)},null)}function m(n){return o.Pb(0,[(n()(),o.tb(0,0,null,null,4,"div",[["class","location__map"]],null,null,null,null,null)),(n()(),o.tb(1,0,null,null,3,"div",[["class","location__map__leaflet"],["leaflet",""]],null,[[null,"leafletMapReady"],["window","resize"]],function(n,t,e){var l=!0,i=n.component;return"window:resize"===t&&(l=!1!==o.Fb(n,2).onResize()&&l),"leafletMapReady"===t&&(l=!1!==i.onMapReady(e)&&l),l},null,null)),o.sb(2,606208,null,0,f.a,[o.k,o.z],{options:[0,"options"]},{mapReady:"leafletMapReady"}),(n()(),o.ib(16777216,null,null,1,null,v)),o.sb(4,278528,null,0,p.i,[o.O,o.L,o.s],{ngForOf:[0,"ngForOf"]},null)],function(n,t){var e=t.component;n(t,2,0,e.options),n(t,4,0,e.markerLayers)},null)}function k(n){return o.Pb(0,[(n()(),o.tb(0,0,null,null,5,"ion-content",[["class","location"],["fullscreen","true"]],null,null,null,a.V,a.j)),o.sb(1,49152,null,0,s.u,[o.h,o.k,o.z],{fullscreen:[0,"fullscreen"]},null),(n()(),o.ib(16777216,null,0,1,null,h)),o.sb(3,16384,null,0,p.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null),(n()(),o.ib(16777216,null,0,1,null,m)),o.sb(5,16384,null,0,p.j,[o.O,o.L],{ngIf:[0,"ngIf"]},null)],function(n,t){var e=t.component;n(t,1,0,"true"),n(t,3,0,e.loading),n(t,5,0,!e.loading)},null)}function y(n){return o.Pb(0,[(n()(),o.tb(0,0,null,null,1,"app-location",[],null,null,null,k,d)),o.sb(1,114688,null,0,u,[l.a,g.n,o.z],null,null)],function(n,t){n(t,1,0)},null)}var _=o.pb("app-location",u,y,{},{},[]),w=e("gIcY"),P=e("foBm");e.d(t,"LocationPageModuleNgFactory",function(){return D});var D=o.qb(r,[],function(n){return o.Cb([o.Db(512,o.j,o.bb,[[8,[c.a,_]],[3,o.j],o.x]),o.Db(4608,p.l,p.k,[o.u,[2,p.w]]),o.Db(4608,w.l,w.l,[]),o.Db(4608,s.b,s.b,[o.z,o.g]),o.Db(4608,s.Hb,s.Hb,[s.b,o.j,o.q]),o.Db(4608,s.Lb,s.Lb,[s.b,o.j,o.q]),o.Db(1073742336,p.b,p.b,[]),o.Db(1073742336,w.k,w.k,[]),o.Db(1073742336,w.d,w.d,[]),o.Db(1073742336,s.Db,s.Db,[]),o.Db(1073742336,g.q,g.q,[[2,g.v],[2,g.n]]),o.Db(1073742336,P.a,P.a,[]),o.Db(1073742336,r,r,[]),o.Db(1024,g.l,function(){return[[{path:"",component:u}]]},[])])})},gcxx:function(n,t,e){"use strict";e.d(t,"a",function(){return r});var o=e("AytR"),l=e("CcnG"),i=e("t/Na"),u=e("iw74"),r=function(){function n(n,t){this.http=n,this.storage=t}return n.prototype.getEvents=function(n){var t=this;return new Promise(function(e,l){t.storage.get("dmo_token").then(function(i){i?t.http.get(o.a.apiUrl+"/events?token="+i+"&search="+n).subscribe(function(n){e(n)},function(n){l(n)}):l()})})},n.prototype.getEvent=function(n){var t=this;return new Promise(function(e,l){t.storage.get("dmo_token").then(function(i){i?t.http.get(o.a.apiUrl+"/events/"+n+"?token="+i).subscribe(function(n){e(n)},function(n){l(n)}):l()})})},n.prototype.createEvent=function(n){var t=this;return new Promise(function(e,l){t.storage.get("dmo_token").then(function(i){i?t.http.post(o.a.apiUrl+"/events?token="+i,n).subscribe(function(n){e(n)},function(n){l(n)}):l()})})},n.prototype.updateEvent=function(n){var t=this;return new Promise(function(e,l){t.storage.get("dmo_token").then(function(i){i?t.http.put(o.a.apiUrl+"/events/"+n.id+"?token="+i,n).subscribe(function(n){e(n)},function(n){l(n)}):l()})})},n.prototype.deleteEvent=function(n){var t=this;return new Promise(function(e,l){t.storage.get("dmo_token").then(function(i){i?t.http.delete(o.a.apiUrl+"/events/"+n+"?token="+i).subscribe(function(n){e(n)},function(n){l(n)}):l()})})},n.ngInjectableDef=l.Sb({factory:function(){return new n(l.Tb(i.c),l.Tb(u.b))},token:n,providedIn:"root"}),n}()}}]);