(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{CKTy:function(n,t,e){"use strict";e.r(t);var l=e("8Y7J"),o=e("gcxx"),i=e("4R65");class r{constructor(n,t,e){this.eventService=n,this.router=t,this.ngZone=e,this.markerIcon=Object(i.icon)({iconUrl:"assets/marker.png",iconSize:[26,32],iconAnchor:[10,32]}),this.events=[],this.loading=!0,this.getEvents()}ngOnInit(){this.options={layers:[Object(i.tileLayer)("https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=8be37a51847b4efe9b8089bbad4f22dc",{maxZoom:18,attribution:""})],zoom:5,center:Object(i.latLng)(-40.77653244822433,172.7488392217997)}}getEvents(){this.loading=!0,this.eventService.getEvents("").then(n=>{this.events=n,this.markerLayers=[];for(let t of this.events)console.log(t),t.latitude&&t.longitude&&this.markerLayers.push(Object(i.marker)([t.latitude,t.longitude],{icon:this.markerIcon,riseOnHover:!0}).on("click",()=>{this.ngZone.run(()=>{this.router.navigate(["event/"+t.id])})}));console.log(this.markerLayers),this.loading=!1}).catch(()=>{this.loading=!1})}onMapReady(n){setTimeout(()=>{n.invalidateSize(),n.zoomControl.setPosition("bottomright")},0)}}class u{}var a=e("pMnS"),s=e("oBZk"),c=e("ZZ/e"),b=e("2lPn"),g=e("lDAE"),p=e("SVse"),h=e("iInd"),d=l.pb({encapsulation:0,styles:[[".location[_ngcontent-%COMP%]   .location__loading[_ngcontent-%COMP%]{text-align:center;margin-top:150px}.location[_ngcontent-%COMP%]   .location__map[_ngcontent-%COMP%]{height:100%;width:100%;margin-top:-20px;position:relative}.location[_ngcontent-%COMP%]   .location__map[_ngcontent-%COMP%]   .location__map__leaflet[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:110%}"]],data:{}});function f(n){return l.Nb(0,[(n()(),l.rb(0,0,null,null,2,"div",[["class","location__loading"]],null,null,null,null,null)),(n()(),l.rb(1,0,null,null,1,"ion-spinner",[],null,null,null,s.pb,s.D)),l.qb(2,49152,null,0,c.rb,[l.h,l.k,l.x],null,null)],null,null)}function v(n){return l.Nb(0,[(n()(),l.rb(0,0,null,null,1,"div",[],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.clicked()&&l),l},null,null)),l.qb(1,737280,null,0,b.a,[g.a,l.x],{layer:[0,"layer"]},null)],function(n,t){n(t,1,0,t.context.$implicit)},null)}function m(n){return l.Nb(0,[(n()(),l.rb(0,0,null,null,4,"div",[["class","location__map"]],null,null,null,null,null)),(n()(),l.rb(1,0,null,null,3,"div",[["class","location__map__leaflet"],["leaflet",""]],null,[[null,"leafletMapReady"],["window","resize"]],function(n,t,e){var o=!0,i=n.component;return"window:resize"===t&&(o=!1!==l.Db(n,2).onResize()&&o),"leafletMapReady"===t&&(o=!1!==i.onMapReady(e)&&o),o},null,null)),l.qb(2,606208,null,0,g.a,[l.k,l.x],{options:[0,"options"]},{mapReady:"leafletMapReady"}),(n()(),l.gb(16777216,null,null,1,null,v)),l.qb(4,278528,null,0,p.i,[l.M,l.J,l.q],{ngForOf:[0,"ngForOf"]},null)],function(n,t){var e=t.component;n(t,2,0,e.options),n(t,4,0,e.markerLayers)},null)}function k(n){return l.Nb(0,[(n()(),l.rb(0,0,null,null,5,"ion-content",[["class","location"],["fullscreen","true"]],null,null,null,s.V,s.j)),l.qb(1,49152,null,0,c.u,[l.h,l.k,l.x],{fullscreen:[0,"fullscreen"]},null),(n()(),l.gb(16777216,null,0,1,null,f)),l.qb(3,16384,null,0,p.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,0,1,null,m)),l.qb(5,16384,null,0,p.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null)],function(n,t){var e=t.component;n(t,1,0,"true"),n(t,3,0,e.loading),n(t,5,0,!e.loading)},null)}function _(n){return l.Nb(0,[(n()(),l.rb(0,0,null,null,1,"app-location",[],null,null,null,k,d)),l.qb(1,114688,null,0,r,[o.a,h.n,l.x],null,null)],function(n,t){n(t,1,0)},null)}var y=l.nb("app-location",r,_,{},{},[]),w=e("s7LF"),x=e("foBm");e.d(t,"LocationPageModuleNgFactory",function(){return B});var B=l.ob(u,[],function(n){return l.Ab([l.Bb(512,l.j,l.Z,[[8,[a.a,y]],[3,l.j],l.v]),l.Bb(4608,p.l,p.k,[l.s,[2,p.w]]),l.Bb(4608,w.l,w.l,[]),l.Bb(4608,c.b,c.b,[l.x,l.g]),l.Bb(4608,c.Hb,c.Hb,[c.b,l.j,l.p]),l.Bb(4608,c.Lb,c.Lb,[c.b,l.j,l.p]),l.Bb(1073742336,p.b,p.b,[]),l.Bb(1073742336,w.k,w.k,[]),l.Bb(1073742336,w.d,w.d,[]),l.Bb(1073742336,c.Db,c.Db,[]),l.Bb(1073742336,h.q,h.q,[[2,h.v],[2,h.n]]),l.Bb(1073742336,x.a,x.a,[]),l.Bb(1073742336,u,u,[]),l.Bb(1024,h.l,function(){return[[{path:"",component:r}]]},[])])})},gcxx:function(n,t,e){"use strict";e.d(t,"a",function(){return u});var l=e("AytR"),o=e("8Y7J"),i=e("IheW"),r=e("xgBC");let u=(()=>{class n{constructor(n,t){this.http=n,this.storage=t}getEvents(n){return new Promise((t,e)=>{this.storage.get("dmo_token").then(o=>{o?this.http.get(l.a.apiUrl+"/events?token="+o+"&search="+n).subscribe(n=>{t(n)},n=>{e(n)}):e()})})}getEvent(n){return new Promise((t,e)=>{this.storage.get("dmo_token").then(o=>{o?this.http.get(l.a.apiUrl+"/events/"+n+"?token="+o).subscribe(n=>{t(n)},n=>{e(n)}):e()})})}createEvent(n){return new Promise((t,e)=>{this.storage.get("dmo_token").then(o=>{o?this.http.post(l.a.apiUrl+"/events?token="+o,n).subscribe(n=>{t(n)},n=>{e(n)}):e()})})}updateEvent(n){return new Promise((t,e)=>{this.storage.get("dmo_token").then(o=>{o?this.http.put(l.a.apiUrl+"/events/"+n.id+"?token="+o,n).subscribe(n=>{t(n)},n=>{e(n)}):e()})})}deleteEvent(n){return new Promise((t,e)=>{this.storage.get("dmo_token").then(o=>{o?this.http.delete(l.a.apiUrl+"/events/"+n+"?token="+o).subscribe(n=>{t(n)},n=>{e(n)}):e()})})}}return n.ngInjectableDef=o.Qb({factory:function(){return new n(o.Rb(i.c),o.Rb(r.b))},token:n,providedIn:"root"}),n})()}}]);