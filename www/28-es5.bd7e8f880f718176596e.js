(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"9FoL":function(n,l,t){"use strict";t.r(l);var u=t("CcnG"),e=t("zA0m"),o=t("p67C"),r=t("wd/R"),i=function(){function n(n,l){this.barcodeScanner=n,this.dealService=l,this.result="",this.user={},this.deal={},this.claimedDeal={}}return n.prototype.ngOnInit=function(){},n.prototype.scanCode=function(){var n=this;this.barcodeScanner.scan().then(function(l){console.log("Barcode data",l),n.getDataFromCode(l)}).catch(function(l){n.result=l,console.log("Error",l)})},n.prototype.getDataFromCode=function(n){var l=this,t=n.split(":");t.length>0?this.dealService.getDataForQrCode(t[1],t[0]).then(function(n){l.user=n.user,l.deal=n.deal,l.claimedDeal=n.claimed}):this.result="Invalid barcode"},n.prototype.formatDate=function(n){return r(n).format("MMM Do, HH:mmA")},n}(),a=function(){return function(){}}(),c=t("pMnS"),s=t("Ip0R"),b=t("oBZk"),f=t("ZZ/e"),d=u.rb({encapsulation:0,styles:[[".scan-qr[_ngcontent-%COMP%]{text-align:center}.scan-qr[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px}.scan-qr[_ngcontent-%COMP%]   .scan-qr__result[_ngcontent-%COMP%]{margin:0 0 10px;color:red}"]],data:{}});function p(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,1,"p",[["class","scan-qr__result"]],null,null,null,null,null)),(n()(),u.Nb(1,null,["",""]))],null,function(n,l){n(l,1,0,l.component.result)})}function g(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),u.tb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),u.Nb(2,null,[""," ",""]))],null,function(n,l){var t=l.component;n(l,2,0,t.user.profile.first_name,t.user.profile.last_name)})}function h(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),u.tb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),u.Nb(2,null,["",""]))],null,function(n,l){n(l,2,0,l.component.user.name)})}function m(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,5,"div",[["class","scan-qr__user"]],null,null,null,null,null)),(n()(),u.Nb(-1,null,[" Claimed by: "])),(n()(),u.ib(16777216,null,null,1,null,g)),u.sb(3,16384,null,0,s.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(n()(),u.ib(16777216,null,null,1,null,h)),u.sb(5,16384,null,0,s.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,3,0,t.user.profile),n(l,5,0,!t.user.profile)},null)}function k(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,3,"div",[["class","scan-qr__deal"]],null,null,null,null,null)),(n()(),u.Nb(-1,null,[" Deal: "])),(n()(),u.tb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),u.Nb(3,null,["",""]))],null,function(n,l){n(l,3,0,l.component.deal.name)})}function D(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,3,"div",[["class","scan-qr__claimed"]],null,null,null,null,null)),(n()(),u.Nb(-1,null,[" Claimed at: "])),(n()(),u.tb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),u.Nb(3,null,["",""]))],null,function(n,l){var t=l.component;n(l,3,0,t.formatDate(t.claimedDeal.created_at))})}function v(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,13,"ion-header",[],null,null,null,b.Z,b.n)),u.sb(1,49152,null,0,f.B,[u.h,u.k,u.z],null,null),(n()(),u.tb(2,0,null,0,11,"ion-toolbar",[["color","primary"]],null,null,null,b.xb,b.L)),u.sb(3,49152,null,0,f.Bb,[u.h,u.k,u.z],{color:[0,"color"]},null),(n()(),u.tb(4,0,null,0,6,"ion-buttons",[["slot","start"]],null,null,null,b.Q,b.e)),u.sb(5,49152,null,0,f.l,[u.h,u.k,u.z],null,null),(n()(),u.tb(6,0,null,0,4,"ion-button",[],null,null,null,b.P,b.d)),u.sb(7,49152,null,0,f.k,[u.h,u.k,u.z],null,null),(n()(),u.tb(8,0,null,0,2,"ion-back-button",[["defaultHref","/tabs/home"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==u.Fb(n,10).onClick(t)&&e),e},b.O,b.c)),u.sb(9,49152,null,0,f.g,[u.h,u.k,u.z],{defaultHref:[0,"defaultHref"]},null),u.sb(10,16384,null,0,f.h,[[2,f.hb],f.Ib],{defaultHref:[0,"defaultHref"]},null),(n()(),u.tb(11,0,null,0,2,"ion-title",[],null,null,null,b.vb,b.J)),u.sb(12,49152,null,0,f.zb,[u.h,u.k,u.z],null,null),(n()(),u.Nb(-1,0,["Scan QR Code"])),(n()(),u.tb(14,0,null,null,12,"ion-content",[["class","scan-qr"]],null,null,null,b.V,b.j)),u.sb(15,49152,null,0,f.u,[u.h,u.k,u.z],null,null),(n()(),u.tb(16,0,null,0,2,"ion-button",[],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.scanCode()&&u),u},b.P,b.d)),u.sb(17,49152,null,0,f.k,[u.h,u.k,u.z],null,null),(n()(),u.Nb(-1,0,["Scan QR Code"])),(n()(),u.ib(16777216,null,0,1,null,p)),u.sb(20,16384,null,0,s.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(n()(),u.ib(16777216,null,0,1,null,m)),u.sb(22,16384,null,0,s.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(n()(),u.ib(16777216,null,0,1,null,k)),u.sb(24,16384,null,0,s.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(n()(),u.ib(16777216,null,0,1,null,D)),u.sb(26,16384,null,0,s.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,3,0,"primary"),n(l,9,0,"/tabs/home"),n(l,10,0,"/tabs/home"),n(l,20,0,t.result),n(l,22,0,t.user.id),n(l,24,0,t.deal.id),n(l,26,0,t.claimedDeal.id)},null)}function _(n){return u.Pb(0,[(n()(),u.tb(0,0,null,null,1,"app-scan-qr",[],null,null,null,v,d)),u.sb(1,114688,null,0,i,[e.a,o.a],null,null)],function(n,l){n(l,1,0)},null)}var P=u.pb("app-scan-qr",i,_,{},{},[]),C=t("gIcY"),y=t("ZYCi");t.d(l,"ScanQrPageModuleNgFactory",function(){return I});var I=u.qb(a,[],function(n){return u.Cb([u.Db(512,u.j,u.bb,[[8,[c.a,P]],[3,u.j],u.x]),u.Db(4608,s.l,s.k,[u.u,[2,s.w]]),u.Db(4608,C.l,C.l,[]),u.Db(4608,f.b,f.b,[u.z,u.g]),u.Db(4608,f.Hb,f.Hb,[f.b,u.j,u.q]),u.Db(4608,f.Lb,f.Lb,[f.b,u.j,u.q]),u.Db(1073742336,s.b,s.b,[]),u.Db(1073742336,C.k,C.k,[]),u.Db(1073742336,C.d,C.d,[]),u.Db(1073742336,f.Db,f.Db,[]),u.Db(1073742336,y.q,y.q,[[2,y.v],[2,y.n]]),u.Db(1073742336,a,a,[]),u.Db(1024,y.l,function(){return[[{path:"",component:i}]]},[])])})},p67C:function(n,l,t){"use strict";t.d(l,"a",function(){return i});var u=t("AytR"),e=t("CcnG"),o=t("t/Na"),r=t("iw74"),i=function(){function n(n,l){this.http=n,this.storage=l}return n.prototype.getDeals=function(n){var l=this;return new Promise(function(t,e){l.storage.get("dmo_token").then(function(o){o?l.http.get(u.a.apiUrl+"/deals?token="+o+"&search="+n).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.getDeal=function(n){var l=this;return new Promise(function(t,e){l.storage.get("dmo_token").then(function(o){o?l.http.get(u.a.apiUrl+"/deals/"+n+"?token="+o).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.createDeal=function(n){var l=this;return new Promise(function(t,e){l.storage.get("dmo_token").then(function(o){o?l.http.post(u.a.apiUrl+"/deals?token="+o,n).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.updateDeal=function(n){var l=this;return new Promise(function(t,e){l.storage.get("dmo_token").then(function(o){o?l.http.put(u.a.apiUrl+"/deals/"+n.id+"?token="+o,n).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.deleteDeal=function(n){var l=this;return new Promise(function(t,e){l.storage.get("dmo_token").then(function(o){o?l.http.delete(u.a.apiUrl+"/deals/"+n+"?token="+o).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.claimDeal=function(n){var l=this;return new Promise(function(t,e){l.storage.get("dmo_token").then(function(o){o?l.http.post(u.a.apiUrl+"/claimeddeals?token="+o,{deal_id:n}).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.getClaimedDeals=function(){var n=this;return new Promise(function(l,t){n.storage.get("dmo_token").then(function(e){e?n.http.get(u.a.apiUrl+"/claimeddeals?token="+e).subscribe(function(n){l(n)},function(n){t(n)}):t()})})},n.prototype.getDataForQrCode=function(n,l){var t=this;return new Promise(function(e,o){t.storage.get("dmo_token").then(function(r){r?t.http.get(u.a.apiUrl+"/qrcode?token="+r+"&user_id="+n+"&deal_id="+l).subscribe(function(n){e(n)},function(n){o(n)}):o()})})},n.ngInjectableDef=e.Sb({factory:function(){return new n(e.Tb(o.c),e.Tb(r.b))},token:n,providedIn:"root"}),n}()}}]);