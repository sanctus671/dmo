(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"9FoL":function(l,n,u){"use strict";u.r(n);var t=u("8Y7J"),e=u("zA0m"),r=u("p67C"),o=u("wd/R");class a{constructor(l,n){this.barcodeScanner=l,this.dealService=n,this.result="",this.user={},this.deal={},this.claimedDeal={}}ngOnInit(){}scanCode(){this.barcodeScanner.scan().then(l=>{console.log("Barcode data",l),this.getDataFromCode(l)}).catch(l=>{this.result=l,console.log("Error",l)})}getDataFromCode(l){let n=l.split(":");n.length>0?this.dealService.getDataForQrCode(n[1],n[0]).then(l=>{this.user=l.user,this.deal=l.deal,this.claimedDeal=l.claimed}):this.result="Invalid barcode"}formatDate(l){return o(l).format("MMM Do, HH:mmA")}}class s{}var i=u("pMnS"),b=u("SVse"),c=u("oBZk"),d=u("ZZ/e"),h=t.pb({encapsulation:0,styles:[[".scan-qr[_ngcontent-%COMP%]{text-align:center}.scan-qr[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px}.scan-qr[_ngcontent-%COMP%]   .scan-qr__result[_ngcontent-%COMP%]{margin:0 0 10px;color:red}"]],data:{}});function g(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"p",[["class","scan-qr__result"]],null,null,null,null,null)),(l()(),t.Lb(1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.result)})}function p(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t.Lb(2,null,[""," ",""]))],null,function(l,n){var u=n.component;l(n,2,0,u.user.profile.first_name,u.user.profile.last_name)})}function m(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t.Lb(2,null,["",""]))],null,function(l,n){l(n,2,0,n.component.user.name)})}function f(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,5,"div",[["class","scan-qr__user"]],null,null,null,null,null)),(l()(),t.Lb(-1,null,[" Claimed by: "])),(l()(),t.gb(16777216,null,null,1,null,p)),t.qb(3,16384,null,0,b.j,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,m)),t.qb(5,16384,null,0,b.j,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,u.user.profile),l(n,5,0,!u.user.profile)},null)}function k(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,3,"div",[["class","scan-qr__deal"]],null,null,null,null,null)),(l()(),t.Lb(-1,null,[" Deal: "])),(l()(),t.rb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t.Lb(3,null,["",""]))],null,function(l,n){l(n,3,0,n.component.deal.name)})}function q(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,3,"div",[["class","scan-qr__claimed"]],null,null,null,null,null)),(l()(),t.Lb(-1,null,[" Claimed at: "])),(l()(),t.rb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t.Lb(3,null,["",""]))],null,function(l,n){var u=n.component;l(n,3,0,u.formatDate(u.claimedDeal.created_at))})}function _(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,13,"ion-header",[],null,null,null,c.Z,c.n)),t.qb(1,49152,null,0,d.B,[t.h,t.k,t.x],null,null),(l()(),t.rb(2,0,null,0,11,"ion-toolbar",[["color","primary"]],null,null,null,c.xb,c.L)),t.qb(3,49152,null,0,d.Bb,[t.h,t.k,t.x],{color:[0,"color"]},null),(l()(),t.rb(4,0,null,0,6,"ion-buttons",[["slot","start"]],null,null,null,c.Q,c.e)),t.qb(5,49152,null,0,d.l,[t.h,t.k,t.x],null,null),(l()(),t.rb(6,0,null,0,4,"ion-button",[],null,null,null,c.P,c.d)),t.qb(7,49152,null,0,d.k,[t.h,t.k,t.x],null,null),(l()(),t.rb(8,0,null,0,2,"ion-back-button",[["defaultHref","/tabs/home"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==t.Db(l,10).onClick(u)&&e),e},c.O,c.c)),t.qb(9,49152,null,0,d.g,[t.h,t.k,t.x],{defaultHref:[0,"defaultHref"]},null),t.qb(10,16384,null,0,d.h,[[2,d.hb],d.Ib],{defaultHref:[0,"defaultHref"]},null),(l()(),t.rb(11,0,null,0,2,"ion-title",[],null,null,null,c.vb,c.J)),t.qb(12,49152,null,0,d.zb,[t.h,t.k,t.x],null,null),(l()(),t.Lb(-1,0,["Scan QR Code"])),(l()(),t.rb(14,0,null,null,12,"ion-content",[["class","scan-qr"]],null,null,null,c.V,c.j)),t.qb(15,49152,null,0,d.u,[t.h,t.k,t.x],null,null),(l()(),t.rb(16,0,null,0,2,"ion-button",[],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.scanCode()&&t),t},c.P,c.d)),t.qb(17,49152,null,0,d.k,[t.h,t.k,t.x],null,null),(l()(),t.Lb(-1,0,["Scan QR Code"])),(l()(),t.gb(16777216,null,0,1,null,g)),t.qb(20,16384,null,0,b.j,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,0,1,null,f)),t.qb(22,16384,null,0,b.j,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,0,1,null,k)),t.qb(24,16384,null,0,b.j,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,0,1,null,q)),t.qb(26,16384,null,0,b.j,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,"primary"),l(n,9,0,"/tabs/home"),l(n,10,0,"/tabs/home"),l(n,20,0,u.result),l(n,22,0,u.user.id),l(n,24,0,u.deal.id),l(n,26,0,u.claimedDeal.id)},null)}function D(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"app-scan-qr",[],null,null,null,_,h)),t.qb(1,114688,null,0,a,[e.a,r.a],null,null)],function(l,n){l(n,1,0)},null)}var v=t.nb("app-scan-qr",a,D,{},{},[]),C=u("s7LF"),I=u("iInd");u.d(n,"ScanQrPageModuleNgFactory",function(){return B});var B=t.ob(s,[],function(l){return t.Ab([t.Bb(512,t.j,t.Z,[[8,[i.a,v]],[3,t.j],t.v]),t.Bb(4608,b.l,b.k,[t.s,[2,b.w]]),t.Bb(4608,C.l,C.l,[]),t.Bb(4608,d.b,d.b,[t.x,t.g]),t.Bb(4608,d.Hb,d.Hb,[d.b,t.j,t.p]),t.Bb(4608,d.Lb,d.Lb,[d.b,t.j,t.p]),t.Bb(1073742336,b.b,b.b,[]),t.Bb(1073742336,C.k,C.k,[]),t.Bb(1073742336,C.d,C.d,[]),t.Bb(1073742336,d.Db,d.Db,[]),t.Bb(1073742336,I.q,I.q,[[2,I.v],[2,I.n]]),t.Bb(1073742336,s,s,[]),t.Bb(1024,I.l,function(){return[[{path:"",component:a}]]},[])])})},p67C:function(l,n,u){"use strict";u.d(n,"a",function(){return a});var t=u("AytR"),e=u("8Y7J"),r=u("IheW"),o=u("xgBC");let a=(()=>{class l{constructor(l,n){this.http=l,this.storage=n}getDeals(l){return new Promise((n,u)=>{this.storage.get("dmo_token").then(e=>{e?this.http.get(t.a.apiUrl+"/deals?token="+e+"&search="+l).subscribe(l=>{n(l)},l=>{u(l)}):u()})})}getDeal(l){return new Promise((n,u)=>{this.storage.get("dmo_token").then(e=>{e?this.http.get(t.a.apiUrl+"/deals/"+l+"?token="+e).subscribe(l=>{n(l)},l=>{u(l)}):u()})})}createDeal(l){return new Promise((n,u)=>{this.storage.get("dmo_token").then(e=>{e?this.http.post(t.a.apiUrl+"/deals?token="+e,l).subscribe(l=>{n(l)},l=>{u(l)}):u()})})}updateDeal(l){return new Promise((n,u)=>{this.storage.get("dmo_token").then(e=>{e?this.http.put(t.a.apiUrl+"/deals/"+l.id+"?token="+e,l).subscribe(l=>{n(l)},l=>{u(l)}):u()})})}deleteDeal(l){return new Promise((n,u)=>{this.storage.get("dmo_token").then(e=>{e?this.http.delete(t.a.apiUrl+"/deals/"+l+"?token="+e).subscribe(l=>{n(l)},l=>{u(l)}):u()})})}claimDeal(l){return new Promise((n,u)=>{this.storage.get("dmo_token").then(e=>{e?this.http.post(t.a.apiUrl+"/claimeddeals?token="+e,{deal_id:l}).subscribe(l=>{n(l)},l=>{u(l)}):u()})})}getClaimedDeals(){return new Promise((l,n)=>{this.storage.get("dmo_token").then(u=>{u?this.http.get(t.a.apiUrl+"/claimeddeals?token="+u).subscribe(n=>{l(n)},l=>{n(l)}):n()})})}getDataForQrCode(l,n){return new Promise((u,e)=>{this.storage.get("dmo_token").then(r=>{r?this.http.get(t.a.apiUrl+"/qrcode?token="+r+"&user_id="+l+"&deal_id="+n).subscribe(l=>{u(l)},l=>{e(l)}):e()})})}}return l.ngInjectableDef=e.Qb({factory:function(){return new l(e.Rb(r.c),e.Rb(o.b))},token:l,providedIn:"root"}),l})()}}]);