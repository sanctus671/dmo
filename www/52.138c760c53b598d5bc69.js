(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{S0kZ:function(l,n,u){"use strict";u.r(n);var e=u("CcnG"),t=u("ZZ/e"),r=u("ri4K"),o=u("GS3A"),i=u("9B/o"),a=u("wd/R"),s=function(){function l(l,n,u,e,t,r,o){var i=this;this.authenticationService=l,this.iap=n,this.iab=u,this.alertController=e,this.platform=t,this.loadingController=r,this.navController=o,this.authenticationService.getUserData().subscribe(function(l){i.user=l}),this.productId="com.dmonz.app.premiummonthly",this.product={price:24.99,title:"Premium",productId:this.productId},this.product2Id="com.dmonz.app.premiumyearly",this.product2={price:249,title:"Yearly Premium",productId:this.product2Id},this.iap.getProducts([this.productId,this.product2Id]).then(function(l){for(var n in l)l[n].productId===i.product2Id?(i.product2=l[n],i.product2.price&&(document.getElementById("product2-price").innerText=i.product2.price)):(i.product=l[n],i.product.price&&(document.getElementById("product-price").innerText=i.product.price))}).catch(function(l){}),this.isIos=this.platform.is("ios")}return l.prototype.ngOnInit=function(){},l.prototype.subscribe=function(l){var n,u=this;this.loadingController.create({message:"Upgrading...",duration:1e4}).then(function(l){l.present(),n=l}),this.iap.subscribe(l).then(function(e){u.authenticationService.upgrade(l).then(function(){u.authenticationService.retreiveUserData().then(function(){}),n.dismiss(),u.alertController.create({header:"Thank You!",subHeader:"You are now a premium DMO member",message:"You will be able to claim any deal in the app. If you have any issues, contact support under Settings in the app.",buttons:[{text:"OK",role:"cancel"}]}).then(function(l){l.present(),l.onDidDismiss().then(function(){u.navController.pop()})})}).catch(function(l){console.log(l),n.dismiss(),u.alertController.create({header:"Premium Member Limit Exceeded",message:"We are currently only taking in a limited number of premium members. Follow us on Instagram to be notified of when the limit is increased.",buttons:[{text:"OK",role:"cancel"}]}).then(function(l){l.present()})})}).catch(function(l){l&&l.message&&l.message.toLowerCase().indexOf("cancelled")>-1||(l&&l.message?alert(JSON.stringify(l.message)):alert(JSON.stringify(l)))})},l.prototype.restorePremium=function(){var l=this;this.iap.restorePurchases().then(function(n){for(var u=0,e=n;u<e.length;u++){var t=e[u];if(!t.date&&t.receipt){var r=JSON.parse(t.receipt);t.date=r.purchaseTime}if(a(t.date).add(1,"months").isAfter(a())&&t.productId===l.product.productId)return void l.authenticationService.upgrade(l.product.productId).then(function(){l.authenticationService.retreiveUserData().then(function(){}),l.alertController.create({header:"Membership Restored",subHeader:"Your premium DMO membership has been restored",message:"You will be able to claim any deal in the app. If you have any issues, contact support under Settings in the app.",buttons:[{text:"OK",role:"cancel"}]}).then(function(n){n.present(),n.onDidDismiss().then(function(){l.navController.pop()})})});if(a(t.date).add(1,"years").isAfter(a())&&t.product2Id===l.product.product2Id)return void l.authenticationService.upgrade(l.product.product2Id).then(function(){l.authenticationService.retreiveUserData().then(function(){}),l.alertController.create({header:"Membership Restored",subHeader:"Your premium DMO membership has been restored",message:"You will be able to claim any deal in the app. If you have any issues, contact support under Settings in the app.",buttons:[{text:"OK",role:"cancel"}]}).then(function(n){n.present(),n.onDidDismiss().then(function(){l.navController.pop()})})})}l.alertController.create({header:"Error",message:"Could not restore premium as we couldn't find it in your purchases or it has expired.",buttons:[{text:"OK",role:"cancel"}]}).then(function(l){l.present()})}).catch(function(n){l.alertController.create({header:"Error",message:"There was an error trying to restore your purchase.",buttons:[{text:"OK",role:"cancel"}]}).then(function(l){l.present()})})},l.prototype.openLink=function(l){this.iab.create(l,"_system")},l}(),c=function(){return function(){}}(),p=u("pMnS"),b=u("oBZk"),d=u("Ip0R"),h=e.rb({encapsulation:0,styles:[[".upgrade[_ngcontent-%COMP%]   .upgrade__header[_ngcontent-%COMP%]{text-align:center;padding:20px 30px 30px;border-bottom:1px solid #dedede}.upgrade[_ngcontent-%COMP%]   .upgrade__header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px}.upgrade[_ngcontent-%COMP%]   .upgrade__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:600;letter-spacing:3px;font-size:24px;line-height:30px;margin-bottom:0;margin-top:0}.upgrade[_ngcontent-%COMP%]   .upgrade__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:600;font-size:11px;letter-spacing:2px;opacity:.6;margin:10px 0 0}.upgrade[_ngcontent-%COMP%]   .upgrade__restore[_ngcontent-%COMP%]{text-align:center;margin-top:60px;margin-bottom:20px}.upgrade[_ngcontent-%COMP%]   .upgrade__upgrade-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{white-space:normal}.upgrade[_ngcontent-%COMP%]   .upgrade__subscription-details[_ngcontent-%COMP%]{padding:0 20px;margin-top:40px;margin-bottom:40px}.upgrade[_ngcontent-%COMP%]   .upgrade__subscription-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:12px;line-height:16px}.upgrade[_ngcontent-%COMP%]   .upgrade__subscription-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;line-height:14px}.upgrade-footer[_ngcontent-%COMP%]{text-align:center}.upgrade-footer[_ngcontent-%COMP%]   .upgrade-footer__actions[_ngcontent-%COMP%]{padding:3px 20px}"]],data:{}});function m(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,11,"div",[["class","upgrade__subscription-details"]],null,null,null,null,null)),(l()(),e.tb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Subscription & Payment Details"])),(l()(),e.tb(3,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Nb(4,null,["You can purchase DMO Premium as a monthly cost or a yearly cost. By purchasing DMO Premium as a monthly subscription you will be charged to renew the subscription every month for ",". By purchasing DMO premium as a yearly subscription you will be charged to renew the subscription every year for ",""])),(l()(),e.tb(5,0,null,null,6,"p",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Payment will be charged to your credit card through your iTunes account at confirmation of purchase. Subscription renews automatically unless cancelled at least 24 hours prior to the end of the subscription period. There is no increase in price when renewing. Subscriptions can be managed and auto-renewal turned off in Account Settings in iTunes after purchase. Once purchased, refunds will not be provided for any unused portion of the term. Read our full "])),(l()(),e.tb(7,0,null,null,1,"a",[["id","premium-terms-link"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.openLink("http://157.245.195.11/terms.html")&&e),e},null,null)),(l()(),e.Nb(-1,null,["Terms of Service"])),(l()(),e.Nb(-1,null,[" and our "])),(l()(),e.tb(10,0,null,null,1,"a",[["id","premium-privacy-link"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.openLink("http://157.245.195.11/privacy.html")&&e),e},null,null)),(l()(),e.Nb(-1,null,["Privacy Policy"]))],null,function(l,n){var u=n.component;l(n,4,0,u.product.price,u.product2.price)})}function g(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,13,"ion-header",[],null,null,null,b.Z,b.n)),e.sb(1,49152,null,0,t.B,[e.h,e.k,e.z],null,null),(l()(),e.tb(2,0,null,0,11,"ion-toolbar",[["color","primary"]],null,null,null,b.xb,b.L)),e.sb(3,49152,null,0,t.Bb,[e.h,e.k,e.z],{color:[0,"color"]},null),(l()(),e.tb(4,0,null,0,6,"ion-buttons",[["slot","start"]],null,null,null,b.Q,b.e)),e.sb(5,49152,null,0,t.l,[e.h,e.k,e.z],null,null),(l()(),e.tb(6,0,null,0,4,"ion-button",[],null,null,null,b.P,b.d)),e.sb(7,49152,null,0,t.k,[e.h,e.k,e.z],null,null),(l()(),e.tb(8,0,null,0,2,"ion-back-button",[["defaultHref","/tabs/home"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Fb(l,10).onClick(u)&&t),t},b.O,b.c)),e.sb(9,49152,null,0,t.g,[e.h,e.k,e.z],{defaultHref:[0,"defaultHref"]},null),e.sb(10,16384,null,0,t.h,[[2,t.hb],t.Ib],{defaultHref:[0,"defaultHref"]},null),(l()(),e.tb(11,0,null,0,2,"ion-title",[],null,null,null,b.vb,b.J)),e.sb(12,49152,null,0,t.zb,[e.h,e.k,e.z],null,null),(l()(),e.Nb(-1,0,["Upgrade"])),(l()(),e.tb(14,0,null,null,83,"ion-content",[["class","upgrade"]],null,null,null,b.V,b.j)),e.sb(15,49152,null,0,t.u,[e.h,e.k,e.z],null,null),(l()(),e.tb(16,0,null,0,5,"div",[["class","upgrade__header"]],null,null,null,null,null)),(l()(),e.tb(17,0,null,null,0,"img",[["src","assets/crown.png"]],null,null,null,null,null)),(l()(),e.tb(18,0,null,null,1,"h2",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Improve Your Event Experience"])),(l()(),e.tb(20,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Become A Premium DMO Member"])),(l()(),e.tb(22,0,null,0,67,"ion-list",[["class","upgrade__upgrade-list"]],null,null,null,b.fb,b.s)),e.sb(23,49152,null,0,t.O,[e.h,e.k,e.z],null,null),(l()(),e.tb(24,0,null,0,2,"ion-list-header",[],null,null,null,b.eb,b.t)),e.sb(25,49152,null,0,t.P,[e.h,e.k,e.z],null,null),(l()(),e.Nb(-1,0,["Membership Perks"])),(l()(),e.tb(27,0,null,0,9,"ion-item",[],null,null,null,b.cb,b.q)),e.sb(28,49152,null,0,t.H,[e.h,e.k,e.z],null,null),(l()(),e.tb(29,0,null,0,1,"ion-icon",[["name","star"],["slot","start"]],null,null,null,b.ab,b.o)),e.sb(30,49152,null,0,t.C,[e.h,e.k,e.z],{name:[0,"name"]},null),(l()(),e.tb(31,0,null,0,5,"ion-label",[],null,null,null,b.db,b.r)),e.sb(32,49152,null,0,t.N,[e.h,e.k,e.z],null,null),(l()(),e.tb(33,0,null,0,1,"h2",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Exclusive Offers"])),(l()(),e.tb(35,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Get deals only offered to premium DMO members"])),(l()(),e.tb(37,0,null,0,9,"ion-item",[],null,null,null,b.cb,b.q)),e.sb(38,49152,null,0,t.H,[e.h,e.k,e.z],null,null),(l()(),e.tb(39,0,null,0,1,"ion-icon",[["name","fastforward"],["slot","start"]],null,null,null,b.ab,b.o)),e.sb(40,49152,null,0,t.C,[e.h,e.k,e.z],{name:[0,"name"]},null),(l()(),e.tb(41,0,null,0,5,"ion-label",[],null,null,null,b.db,b.r)),e.sb(42,49152,null,0,t.N,[e.h,e.k,e.z],null,null),(l()(),e.tb(43,0,null,0,1,"h2",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Skip Lines"])),(l()(),e.tb(45,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Access any event or club without waiting in queues (limited to promoted events only)"])),(l()(),e.tb(47,0,null,0,9,"ion-item",[],null,null,null,b.cb,b.q)),e.sb(48,49152,null,0,t.H,[e.h,e.k,e.z],null,null),(l()(),e.tb(49,0,null,0,1,"ion-icon",[["name","beer"],["slot","start"]],null,null,null,b.ab,b.o)),e.sb(50,49152,null,0,t.C,[e.h,e.k,e.z],{name:[0,"name"]},null),(l()(),e.tb(51,0,null,0,5,"ion-label",[],null,null,null,b.db,b.r)),e.sb(52,49152,null,0,t.N,[e.h,e.k,e.z],null,null),(l()(),e.tb(53,0,null,0,1,"h2",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Free Food & Drinks"])),(l()(),e.tb(55,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Claim free food and drinks offered by your favourite venues"])),(l()(),e.tb(57,0,null,0,9,"ion-item",[],null,null,null,b.cb,b.q)),e.sb(58,49152,null,0,t.H,[e.h,e.k,e.z],null,null),(l()(),e.tb(59,0,null,0,1,"ion-icon",[["name","cash"],["slot","start"]],null,null,null,b.ab,b.o)),e.sb(60,49152,null,0,t.C,[e.h,e.k,e.z],{name:[0,"name"]},null),(l()(),e.tb(61,0,null,0,5,"ion-label",[],null,null,null,b.db,b.r)),e.sb(62,49152,null,0,t.N,[e.h,e.k,e.z],null,null),(l()(),e.tb(63,0,null,0,1,"h2",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Discounted Items"])),(l()(),e.tb(65,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Claim discounts on drinks, food, and other items offered by your favourite venues"])),(l()(),e.tb(67,0,null,0,2,"ion-list-header",[],null,null,null,b.eb,b.t)),e.sb(68,49152,null,0,t.P,[e.h,e.k,e.z],null,null),(l()(),e.Nb(-1,0,["Support"])),(l()(),e.tb(70,0,null,0,9,"ion-item",[],null,null,null,b.cb,b.q)),e.sb(71,49152,null,0,t.H,[e.h,e.k,e.z],null,null),(l()(),e.tb(72,0,null,0,1,"ion-icon",[["name","heart"],["slot","start"]],null,null,null,b.ab,b.o)),e.sb(73,49152,null,0,t.C,[e.h,e.k,e.z],{name:[0,"name"]},null),(l()(),e.tb(74,0,null,0,5,"ion-label",[],null,null,null,b.db,b.r)),e.sb(75,49152,null,0,t.N,[e.h,e.k,e.z],null,null),(l()(),e.tb(76,0,null,0,1,"h2",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Support Us"])),(l()(),e.tb(78,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Help us to continue building and providing the best events app in NZ."])),(l()(),e.tb(80,0,null,0,9,"ion-item",[],null,null,null,b.cb,b.q)),e.sb(81,49152,null,0,t.H,[e.h,e.k,e.z],null,null),(l()(),e.tb(82,0,null,0,1,"ion-icon",[["name","trending-up"],["slot","start"]],null,null,null,b.ab,b.o)),e.sb(83,49152,null,0,t.C,[e.h,e.k,e.z],{name:[0,"name"]},null),(l()(),e.tb(84,0,null,0,5,"ion-label",[],null,null,null,b.db,b.r)),e.sb(85,49152,null,0,t.N,[e.h,e.k,e.z],null,null),(l()(),e.tb(86,0,null,0,1,"h2",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Better Deals"])),(l()(),e.tb(88,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["The more support we have, the better deals we can organise with venues."])),(l()(),e.tb(90,0,null,0,5,"div",[["class","upgrade__restore"]],null,null,null,null,null)),(l()(),e.tb(91,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Already purchased premium?"])),(l()(),e.tb(93,0,null,null,2,"ion-button",[["block",""],["outline",""]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.restorePremium()&&e),e},b.P,b.d)),e.sb(94,49152,null,0,t.k,[e.h,e.k,e.z],null,null),(l()(),e.Nb(-1,0,["Restore Premium"])),(l()(),e.ib(16777216,null,0,1,null,m)),e.sb(97,16384,null,0,d.j,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.tb(98,0,null,null,12,"ion-footer",[["class","upgrade-footer"]],null,null,null,b.Y,b.m)),e.sb(99,49152,null,0,t.z,[e.h,e.k,e.z],null,null),(l()(),e.tb(100,0,null,0,10,"div",[["class","upgrade-footer__actions"]],null,null,null,null,null)),(l()(),e.tb(101,0,null,null,4,"ion-button",[["class","upgrade-footer__actions__item"],["color","dark"],["shape","round"]],null,[[null,"click"]],function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=!1!==t.subscribe(t.productId)&&e),e},b.P,b.d)),e.sb(102,49152,null,0,t.k,[e.h,e.k,e.z],{color:[0,"color"],shape:[1,"shape"]},null),(l()(),e.tb(103,0,null,0,1,"span",[["id","product-price"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["$19.99"])),(l()(),e.Nb(-1,0,["/month "])),(l()(),e.tb(106,0,null,null,4,"ion-button",[["class","upgrade-footer__actions__item"],["color","dark"],["shape","round"]],null,[[null,"click"]],function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=!1!==t.subscribe(t.product2Id)&&e),e},b.P,b.d)),e.sb(107,49152,null,0,t.k,[e.h,e.k,e.z],{color:[0,"color"],shape:[1,"shape"]},null),(l()(),e.tb(108,0,null,0,1,"span",[["id","product2-price"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["$219"])),(l()(),e.Nb(-1,0,["/year "]))],function(l,n){var u=n.component;l(n,3,0,"primary"),l(n,9,0,"/tabs/home"),l(n,10,0,"/tabs/home"),l(n,30,0,"star"),l(n,40,0,"fastforward"),l(n,50,0,"beer"),l(n,60,0,"cash"),l(n,73,0,"heart"),l(n,83,0,"trending-up"),l(n,97,0,u.isIos),l(n,102,0,"dark","round"),l(n,107,0,"dark","round")},null)}function f(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,1,"app-upgrade",[],null,null,null,g,h)),e.sb(1,114688,null,0,s,[r.a,o.a,i.a,t.a,t.Kb,t.Fb,t.Ib],null,null)],function(l,n){l(n,1,0)},null)}var k=e.pb("app-upgrade",s,f,{},{},[]),_=u("gIcY"),y=u("ZYCi");u.d(n,"UpgradePageModuleNgFactory",function(){return v});var v=e.qb(c,[],function(l){return e.Cb([e.Db(512,e.j,e.bb,[[8,[p.a,k]],[3,e.j],e.x]),e.Db(4608,d.l,d.k,[e.u,[2,d.w]]),e.Db(4608,_.l,_.l,[]),e.Db(4608,t.b,t.b,[e.z,e.g]),e.Db(4608,t.Hb,t.Hb,[t.b,e.j,e.q]),e.Db(4608,t.Lb,t.Lb,[t.b,e.j,e.q]),e.Db(1073742336,d.b,d.b,[]),e.Db(1073742336,_.k,_.k,[]),e.Db(1073742336,_.d,_.d,[]),e.Db(1073742336,t.Db,t.Db,[]),e.Db(1073742336,y.q,y.q,[[2,y.v],[2,y.n]]),e.Db(1073742336,c,c,[]),e.Db(1024,y.l,function(){return[[{path:"",component:s}]]},[])])})}}]);