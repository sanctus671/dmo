(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"+PBc":function(n,t,e){"use strict";e.r(t);var l=e("CcnG"),u=e("agnC"),o=e("ZZ/e"),i=function(){function n(n,t,e){var l=this;this.ticketService=n,this.alertCtrl=t,this.route=e,this.scanners=[],this.event={},this.route.queryParams.subscribe(function(n){n&&n.event_id&&(l.event.id=JSON.parse(n.event_id),l.getScanners())})}return n.prototype.ngOnInit=function(){},n.prototype.getScanners=function(){var n=this;this.loading=!0,this.ticketService.getScanners(this.event.id).then(function(t){n.scanners=t,n.loading=!1}).catch(function(){n.loading=!1})},n.prototype.createScanner=function(){var n=this;this.alertCtrl.create({header:"Add Ticket Scanner",inputs:[{name:"user_email",placeholder:"Accout Email",type:"email"}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Add To Event",handler:function(t){t.user_email&&n.ticketService.createScanner(t.user_email,n.event.id,!1).then(function(){n.getScanners()}).catch(function(){n.alertCtrl.create({header:"Error",message:"There was an error adding this user. Ensure this user has an account and the email you entered is correct then try again.",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then(function(n){n.present()})})}},{text:"Add To Venue",handler:function(t){t.user_email&&n.ticketService.createScanner(t.user_email,n.event.id,!0).then(function(){n.getScanners()}).catch(function(){n.alertCtrl.create({header:"Error",message:"There was an error adding this user. Ensure this user has an account and the email you entered is correct then try again.",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then(function(n){n.present()})})}}]}).then(function(n){n.present()})},n.prototype.deleteScanner=function(n){var t=this;this.alertCtrl.create({header:"Are you sure?",message:"You are about to remove this user as a ticket scanner.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Continue",handler:function(e){t.ticketService.deleteScanner(n).then(function(){t.getScanners()})}}]}).then(function(n){n.present()})},n}(),r=function(){return function(){}}(),c=e("pMnS"),s=e("oBZk"),a=e("Ip0R"),f=e("ZYCi"),b=l.rb({encapsulation:0,styles:[[".event-users[_ngcontent-%COMP%]   .event-users__loading[_ngcontent-%COMP%]{text-align:center;margin:100px 10px}.event-users[_ngcontent-%COMP%]   .event-users__empty[_ngcontent-%COMP%]{text-align:center;margin:100px 10px;text-transform:uppercase;font-size:18px;opacity:.1;font-weight:700;letter-spacing:4px}.event-users-footer[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function p(n){return l.Pb(0,[(n()(),l.tb(0,0,null,null,2,"div",[["class","event-users__loading"]],null,null,null,null,null)),(n()(),l.tb(1,0,null,null,1,"ion-spinner",[["color","primary"]],null,null,null,s.xb,s.H)),l.sb(2,49152,null,0,o.rb,[l.h,l.k,l.z],{color:[0,"color"]},null)],function(n,t){n(t,2,0,"primary")},null)}function h(n){return l.Pb(0,[(n()(),l.tb(0,0,null,null,1,"div",[["class","event-users__empty"]],null,null,null,null,null)),(n()(),l.Nb(-1,null,[" No Ticket Scanners "]))],null,null)}function k(n){return l.Pb(0,[(n()(),l.tb(0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),l.Nb(1,null,["",""]))],null,function(n,t){n(t,1,0,t.parent.context.$implicit.profile.mobile)})}function d(n){return l.Pb(0,[(n()(),l.tb(0,0,null,null,12,"ion-item",[["routerDirection","forward"]],null,null,null,s.jb,s.t)),l.sb(1,49152,null,0,o.H,[l.h,l.k,l.z],{routerDirection:[0,"routerDirection"]},null),(n()(),l.tb(2,0,null,0,7,"ion-label",[["class","ion-text-wrap"]],null,null,null,s.kb,s.u)),l.sb(3,49152,null,0,o.N,[l.h,l.k,l.z],null,null),(n()(),l.tb(4,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),l.Nb(5,null,[""," ",""])),(n()(),l.tb(6,0,null,0,1,"h3",[],null,null,null,null,null)),(n()(),l.Nb(7,null,["",""])),(n()(),l.ib(16777216,null,0,1,null,k)),l.sb(9,16384,null,0,a.k,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.tb(10,0,null,0,2,"ion-button",[["fill","outline"],["slot","end"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.deleteScanner(n.context.$implicit.id)&&l),l},s.T,s.d)),l.sb(11,49152,null,0,o.k,[l.h,l.k,l.z],{fill:[0,"fill"]},null),(n()(),l.Nb(-1,0,[" Remove "]))],function(n,t){n(t,1,0,"forward"),n(t,9,0,t.context.$implicit.profile.mobile),n(t,11,0,"outline")},function(n,t){n(t,5,0,t.context.$implicit.profile.first_name,t.context.$implicit.profile.last_name),n(t,7,0,t.context.$implicit.user.email)})}function g(n){return l.Pb(0,[(n()(),l.tb(0,0,null,null,4,"ion-list",[["class","event-users__list"]],null,null,null,s.mb,s.v)),l.sb(1,49152,null,0,o.O,[l.h,l.k,l.z],null,null),(n()(),l.tb(2,0,null,0,2,"div",[["class","event-users__list__user"]],null,null,null,null,null)),(n()(),l.ib(16777216,null,null,1,null,d)),l.sb(4,278528,null,0,a.j,[l.O,l.L,l.s],{ngForOf:[0,"ngForOf"]},null)],function(n,t){n(t,4,0,t.component.scanners)},null)}function m(n){return l.Pb(0,[(n()(),l.tb(0,0,null,null,13,"ion-header",[],null,null,null,s.gb,s.q)),l.sb(1,49152,null,0,o.B,[l.h,l.k,l.z],null,null),(n()(),l.tb(2,0,null,0,11,"ion-toolbar",[["color","primary"]],null,null,null,s.Fb,s.P)),l.sb(3,49152,null,0,o.Bb,[l.h,l.k,l.z],{color:[0,"color"]},null),(n()(),l.tb(4,0,null,0,6,"ion-buttons",[["slot","start"]],null,null,null,s.U,s.e)),l.sb(5,49152,null,0,o.l,[l.h,l.k,l.z],null,null),(n()(),l.tb(6,0,null,0,4,"ion-button",[],null,null,null,s.T,s.d)),l.sb(7,49152,null,0,o.k,[l.h,l.k,l.z],null,null),(n()(),l.tb(8,0,null,0,2,"ion-back-button",[["defaultHref","/tabs/home"]],null,[[null,"click"]],function(n,t,e){var u=!0;return"click"===t&&(u=!1!==l.Fb(n,10).onClick(e)&&u),u},s.S,s.c)),l.sb(9,49152,null,0,o.g,[l.h,l.k,l.z],{defaultHref:[0,"defaultHref"]},null),l.sb(10,16384,null,0,o.h,[[2,o.hb],o.Ib],{defaultHref:[0,"defaultHref"]},null),(n()(),l.tb(11,0,null,0,2,"ion-title",[],null,null,null,s.Db,s.N)),l.sb(12,49152,null,0,o.zb,[l.h,l.k,l.z],null,null),(n()(),l.Nb(-1,0,["Ticket Scanners"])),(n()(),l.tb(14,0,null,null,7,"ion-content",[["class","event-users"]],null,null,null,s.ab,s.k)),l.sb(15,49152,null,0,o.u,[l.h,l.k,l.z],null,null),(n()(),l.ib(16777216,null,0,1,null,p)),l.sb(17,16384,null,0,a.k,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,0,1,null,h)),l.sb(19,16384,null,0,a.k,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.ib(16777216,null,0,1,null,g)),l.sb(21,16384,null,0,a.k,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.tb(22,0,null,null,4,"ion-footer",[["class","event-users-footer"]],null,null,null,s.fb,s.p)),l.sb(23,49152,null,0,o.z,[l.h,l.k,l.z],null,null),(n()(),l.tb(24,0,null,0,2,"ion-button",[["class","event-users-footer__button"],["color","primary"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.createScanner()&&l),l},s.T,s.d)),l.sb(25,49152,null,0,o.k,[l.h,l.k,l.z],{color:[0,"color"]},null),(n()(),l.Nb(-1,0,[" Add User "]))],function(n,t){var e=t.component;n(t,3,0,"primary"),n(t,9,0,"/tabs/home"),n(t,10,0,"/tabs/home"),n(t,17,0,e.loading),n(t,19,0,e.scanners.length<1&&!e.loading),n(t,21,0,!e.loading),n(t,25,0,"primary")},null)}function v(n){return l.Pb(0,[(n()(),l.tb(0,0,null,null,1,"app-event-users",[],null,null,null,m,b)),l.sb(1,114688,null,0,i,[u.a,o.a,f.a],null,null)],function(n,t){n(t,1,0)},null)}var _=l.pb("app-event-users",i,v,{},{},[]),y=e("gIcY");e.d(t,"EventUsersPageModuleNgFactory",function(){return P});var P=l.qb(r,[],function(n){return l.Cb([l.Db(512,l.j,l.bb,[[8,[c.a,_]],[3,l.j],l.x]),l.Db(4608,a.m,a.l,[l.u,[2,a.x]]),l.Db(4608,y.l,y.l,[]),l.Db(4608,o.b,o.b,[l.z,l.g]),l.Db(4608,o.Hb,o.Hb,[o.b,l.j,l.q]),l.Db(4608,o.Lb,o.Lb,[o.b,l.j,l.q]),l.Db(1073742336,a.b,a.b,[]),l.Db(1073742336,y.k,y.k,[]),l.Db(1073742336,y.d,y.d,[]),l.Db(1073742336,o.Db,o.Db,[]),l.Db(1073742336,f.q,f.q,[[2,f.v],[2,f.n]]),l.Db(1073742336,r,r,[]),l.Db(1024,f.l,function(){return[[{path:"",component:i}]]},[])])})},agnC:function(n,t,e){"use strict";e.d(t,"a",function(){return r});var l=e("AytR"),u=e("CcnG"),o=e("t/Na"),i=e("iw74"),r=function(){function n(n,t){this.http=n,this.storage=t}return n.prototype.getTickets=function(){var n=this;return new Promise(function(t,e){n.storage.get("dmo_token").then(function(u){u?n.http.get(l.a.apiUrl+"/tickets?token="+u).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.getAllTickets=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.get(l.a.apiUrl+"/alltickets?token="+o+"&search="+n).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.getTicket=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.get(l.a.apiUrl+"/tickets/"+n+"?token="+o).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.createTicket=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.post(l.a.apiUrl+"/tickets?token="+o,n).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.updateTicket=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.put(l.a.apiUrl+"/tickets/"+n.id+"?token="+o,n).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.deleteTicket=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.delete(l.a.apiUrl+"/tickets/"+n+"?token="+o).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.resellTicket=function(n,t){var e=this;return new Promise(function(u,o){e.storage.get("dmo_token").then(function(i){i?e.http.post(l.a.apiUrl+"/resellticket?token="+i,{id:n,price:t}).subscribe(function(n){u(n)},function(n){o(n)}):o()})})},n.prototype.cancelResellTicket=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.post(l.a.apiUrl+"/cancelresellticket?token="+o,{id:n}).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.giftTicket=function(n,t){var e=this;return new Promise(function(u,o){e.storage.get("dmo_token").then(function(i){i?e.http.post(l.a.apiUrl+"/giftticket?token="+i,{id:n,email:t}).subscribe(function(n){u(n)},function(n){o(n)}):o()})})},n.prototype.getPayments=function(){var n=this;return new Promise(function(t,e){n.storage.get("dmo_token").then(function(u){u?n.http.get(l.a.apiUrl+"/getpayments?token="+u).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.markAsPaid=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.post(l.a.apiUrl+"/markpaid?token="+o,{user_id:n}).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.markAllAsPaid=function(){var n=this;return new Promise(function(t,e){n.storage.get("dmo_token").then(function(u){u?n.http.post(l.a.apiUrl+"/markallpaid?token="+u,{}).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.getBankFile=function(){var n=this;return new Promise(function(t,e){n.storage.get("dmo_token").then(function(u){u?n.http.post(l.a.apiUrl+"/getbankfile?token="+u,{}).subscribe(function(n){t(n)},function(n){e(n)}):e()})})},n.prototype.getScanners=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.get(l.a.apiUrl+"/scanners?token="+o+"&event_id="+n).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.createScanner=function(n,t,e){var u=this;return new Promise(function(o,i){u.storage.get("dmo_token").then(function(r){r?u.http.post(l.a.apiUrl+"/scanners?token="+r,{email:n,event_id:t,venue_user:e}).subscribe(function(n){o(n)},function(n){i(n)}):i()})})},n.prototype.deleteScanner=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.delete(l.a.apiUrl+"/scanners?token="+o+"&id="+n).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.redeemTicket=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.post(l.a.apiUrl+"/redeemticket?token="+o,{ticket_id:n}).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.findTickets=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.get(l.a.apiUrl+"/findtickets?token="+o+"&search="+n).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.purchaseTicket=function(n){var t=this;return new Promise(function(e,u){t.storage.get("dmo_token").then(function(o){o?t.http.post(l.a.apiUrl+"/purchaseticket?token="+o,n).subscribe(function(n){e(n)},function(n){u(n)}):u()})})},n.prototype.getDataForQrCode=function(n,t){var e=this;return new Promise(function(u,o){e.storage.get("dmo_token").then(function(i){i?e.http.get(l.a.apiUrl+"/ticketqrcode?token="+i+"&user_id="+n+"&ticket_id="+t).subscribe(function(n){u(n)},function(n){o(n)}):o()})})},n.ngInjectableDef=u.Sb({factory:function(){return new n(u.Tb(o.c),u.Tb(i.b))},token:n,providedIn:"root"}),n}()}}]);